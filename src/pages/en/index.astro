---
export const prerender = true;
import { Landing } from "@/components/ramadan/Landing";
import LoadingSkeleton from "@/components/ui/LoadingSkeleton.astro";
import type { Locale } from "@/i18n/utils";
import { useTranslations } from "@/i18n/utils";
import BaseLayout from "@/layouts/BaseLayout.astro";

const locale: Locale = "en";
const t = useTranslations(locale);
---

<BaseLayout title={t("landing.title")} description={t("site.description")}>
  <div id="ssr-skeleton">
    <LoadingSkeleton variant="landing" locale={locale} />
  </div>
  <div id="react-root" style="display:none">
    <Landing client:idle locale={locale} />
  </div>
  <script is:inline>
    {
      const observer = new MutationObserver(() => {
        const root = document.getElementById("react-root");
        if (root && root.querySelector("[data-hydrated]")) {
          document.getElementById("ssr-skeleton")?.remove();
          root.style.display = "";
          observer.disconnect();
        }
      });
      const root = document.getElementById("react-root");
      if (root)
        observer.observe(root, {
          childList: true,
          subtree: true,
          attributes: true,
        });
      setTimeout(() => {
        document.getElementById("ssr-skeleton")?.remove();
        const r = document.getElementById("react-root");
        if (r) r.style.display = "";
      }, 3000);
    }
  </script>
</BaseLayout>
